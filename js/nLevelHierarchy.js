  // $.getJSON("../Data2_3.json", function(data){
    var data = {
      "Axes": {
        "Axis": [
          [
            {
              "Member": [
                {
                  "index": 0,
                  "hierarchy": "Measures",
                  "UName": "[Measures].[Actual]",
                  "Caption": "Actual",
                  "LName": "[Measures].[MeasuresLevel]",
                  "LNum": 0,
                  "DisplayInfo": 0
                },
                {
                  "index": 1,
                  "hierarchy": "Region",
                  "UName": "[Region].[All Regions]",
                  "Caption": "All Regions",
                  "LName": "[Region].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 65540
                },
                {
                  "index": 2,
                  "hierarchy": "Region",
                  "UName": "[Region].[xyz]",
                  "Caption": "All Regions",
                  "LName": "[Region].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 65540
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 0,
                  "hierarchy": "Measures",
                  "UName": "[Measures].[Actual]",
                  "Caption": "Actual",
                  "LName": "[Measures].[MeasuresLevel]",
                  "LNum": 0,
                  "DisplayInfo": 0
                },
                {
                  "index": 1,
                  "hierarchy": "Region",
                  "UName": "[Region].[Central]",
                  "Caption": "Central",
                  "LName": "[Region].[Region]",
                  "LNum": 1,
                  "DisplayInfo": 0
                },
                {
                  "index": 2,
                  "hierarchy": "Region",
                  "UName": "[Region].[xyz]",
                  "Caption": "All Regions",
                  "LName": "[Region].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 65540
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 0,
                  "hierarchy": "Measures",
                  "UName": "[Measures].[Budget]",
                  "Caption": "Budget",
                  "LName": "[Measures].[MeasuresLevel]",
                  "LNum": 0,
                  "DisplayInfo": 0
                },
                {
                  "index": 1,
                  "hierarchy": "Region",
                  "UName": "[Region].[Eastern]",
                  "Caption": "Eastern",
                  "LName": "[Region].[Region]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                },
                {
                  "index": 2,
                  "hierarchy": "Region",
                  "UName": "[Region].[xyz]",
                  "Caption": "All Regions",
                  "LName": "[Region].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 65540
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 0,
                  "hierarchy": "Measures",
                  "UName": "[Measures].[Budget]",
                  "Caption": "Budget",
                  "LName": "[Measures].[MeasuresLevel]",
                  "LNum": 0,
                  "DisplayInfo": 0
                },
                {
                  "index": 1,
                  "hierarchy": "Region",
                  "UName": "[Region].[Southern]",
                  "Caption": "Southern",
                  "LName": "[Region].[Region]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                },
                {
                  "index": 2,
                  "hierarchy": "Region",
                  "UName": "[Region].[xyz]",
                  "Caption": "All Regions",
                  "LName": "[Region].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 65540
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 0,
                  "hierarchy": "Measures",
                  "UName": "[Measures].[Budget]",
                  "Caption": "Budget",
                  "LName": "[Measures].[MeasuresLevel]",
                  "LNum": 0,
                  "DisplayInfo": 0
                },
                {
                  "index": 1,
                  "hierarchy": "Region",
                  "UName": "[Region].[Western]",
                  "Caption": "Western",
                  "LName": "[Region].[Region]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                },
                {
                  "index": 2,
                  "hierarchy": "Region",
                  "UName": "[Region].[xyz]",
                  "Caption": "All Regions",
                  "LName": "[Region].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 65540
                }
              ]
            }
          ],
          [
            {
              "Member": [
                {
                  "index": 1,
                  "hierarchy": "Positions",
                  "UName": "[Positions].[All Positions]",
                  "Caption": "All Positions",
                  "LName": "[Positions].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 37
                },
                {
                  "index": 0,
                  "hierarchy": "Department",
                  "UName": "[Department].[All Departments]",
                  "Caption": "All Departments",
                  "LName": "[Department].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 65543
                }

              ]
            },
            {
              "Member": [
                {
                  "index": 1,
                  "hierarchy": "Positions",
                  "UName": "[Positions].[All Positions]",
                  "Caption": "All Positions",
                  "LName": "[Positions].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 37
                },
                {
                  "index": 0,
                  "hierarchy": "Department",
                  "UName": "[Department].[Executive Management]",
                  "Caption": "Executive Management",
                  "LName": "[Department].[Department]",
                  "LNum": 1,
                  "DisplayInfo": 0
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 1,
                  "hierarchy": "Positions",
                  "UName": "[Positions].[All Positions]",
                  "Caption": "All Positions",
                  "LName": "[Positions].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 37
                },
                {
                  "index": 0,
                  "hierarchy": "Department",
                  "UName": "[Department].[Finance]",
                  "Caption": "Finance",
                  "LName": "[Department].[Department]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 1,
                  "hierarchy": "Positions",
                  "UName": "[Positions].[All Positions]",
                  "Caption": "All Positions",
                  "LName": "[Positions].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 37
                },
                {
                  "index": 0,
                  "hierarchy": "Department",
                  "UName": "[Department].[Human Resource]",
                  "Caption": "Human Resource",
                  "LName": "[Department].[Department]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 1,
                  "hierarchy": "Positions",
                  "UName": "[Positions].[All Positions]",
                  "Caption": "All Positions",
                  "LName": "[Positions].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 37
                },
                {
                  "index": 0,
                  "hierarchy": "Department",
                  "UName": "[Department].[Marketing & Communication]",
                  "Caption": "Marketing & Communication",
                  "LName": "[Department].[Department]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 1,
                  "hierarchy": "Positions",
                  "UName": "[Positions].[All Positions]",
                  "Caption": "All Positions",
                  "LName": "[Positions].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 37
                },
                {
                  "index": 0,
                  "hierarchy": "Department",
                  "UName": "[Department].[Product Development]",
                  "Caption": "Product Development",
                  "LName": "[Department].[Department]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 1,
                  "hierarchy": "Positions",
                  "UName": "[Positions].[All Positions]",
                  "Caption": "All Positions",
                  "LName": "[Positions].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 37
                },
                {
                  "index": 0,
                  "hierarchy": "Department",
                  "UName": "[Department].[Professional Services]",
                  "Caption": "Professional Services",
                  "LName": "[Department].[Department]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                }
              ]
            },
            {
              "Member": [
                {
                  "index": 1,
                  "hierarchy": "Positions",
                  "UName": "[Positions].[All Positions]",
                  "Caption": "All Positions",
                  "LName": "[Positions].[(All)]",
                  "LNum": 0,
                  "DisplayInfo": 37
                },
                {
                  "index": 0,
                  "hierarchy": "Department",
                  "UName": "[Department].[Sales]",
                  "Caption": "Sales",
                  "LName": "[Department].[Department]",
                  "LNum": 1,
                  "DisplayInfo": 131072
                }
              ]
            }
          ]
        ]
      },
      "CellData": {
        "Cell": [
          {
            "CellOrdinal": 0,
            "FmtValue": "143,639,982.00"
          },
          {
            "CellOrdinal": 1,
            "FmtValue": "37,893,162.00"
          },
          {
            "CellOrdinal": 2,
            "FmtValue": "35,248,940.00"
          },
          {
            "CellOrdinal": 3,
            "FmtValue": "35,248,940.00"
          },
          {
            "CellOrdinal": 4,
            "FmtValue": "35,248,940.00"
          },
          {
            "CellOrdinal": 5,
            "FmtValue": "6,299,022.00"
          },
          {
            "CellOrdinal": 6,
            "FmtValue": "1,776,282.00"
          },
          {
            "CellOrdinal": 7,
            "FmtValue": "1,507,580.00"
          },
          {
            "CellOrdinal": 8,
            "FmtValue": "1,507,580.00"
          },
          {
            "CellOrdinal": 9,
            "FmtValue": "1,507,580.00"
          },
          {
            "CellOrdinal": 10,
            "FmtValue": "12,224,220.00"
          },
          {
            "CellOrdinal": 11,
            "FmtValue": "3,106,680.00"
          },
          {
            "CellOrdinal": 12,
            "FmtValue": "3,039,180.00"
          },
          {
            "CellOrdinal": 13,
            "FmtValue": "3,039,180.00"
          },
          {
            "CellOrdinal": 14,
            "FmtValue": "3,039,180.00"
          },
          {
            "CellOrdinal": 15,
            "FmtValue": "13,075,463.00"
          },
          {
            "CellOrdinal": 16,
            "FmtValue": "3,438,863.00"
          },
          {
            "CellOrdinal": 17,
            "FmtValue": "3,212,200.00"
          },
          {
            "CellOrdinal": 18,
            "FmtValue": "3,212,200.00"
          },
          {
            "CellOrdinal": 19,
            "FmtValue": "3,212,200.00"
          },
          {
            "CellOrdinal": 20,
            "FmtValue": "13,910,753.00"
          },
          {
            "CellOrdinal": 21,
            "FmtValue": "3,590,423.00"
          },
          {
            "CellOrdinal": 22,
            "FmtValue": "3,440,110.00"
          },
          {
            "CellOrdinal": 23,
            "FmtValue": "3,440,110.00"
          },
          {
            "CellOrdinal": 24,
            "FmtValue": "3,440,110.00"
          },
          {
            "CellOrdinal": 25,
            "FmtValue": "10,644,102.00"
          },
          {
            "CellOrdinal": 26,
            "FmtValue": "2,997,702.00"
          },
          {
            "CellOrdinal": 27,
            "FmtValue": "2,548,800.00"
          },
          {
            "CellOrdinal": 28,
            "FmtValue": "2,548,800.00"
          },
          {
            "CellOrdinal": 29,
            "FmtValue": "2,548,800.00"
          },
          {
            "CellOrdinal": 30,
            "FmtValue": "76,317,649.00"
          },
          {
            "CellOrdinal": 31,
            "FmtValue": "20,068,039.00"
          },
          {
            "CellOrdinal": 32,
            "FmtValue": "18,749,870.00"
          },
          {
            "CellOrdinal": 33,
            "FmtValue": "18,749,870.00"
          },
          {
            "CellOrdinal": 34,
            "FmtValue": "18,749,870.00"
          },
          {
            "CellOrdinal": 35,
            "FmtValue": "11,168,773.00"
          },
          {
            "CellOrdinal": 36,
            "FmtValue": "2,915,173.00"
          },
          {
            "CellOrdinal": 37,
            "FmtValue": "2,751,200.00"
          },
          {
            "CellOrdinal": 38,
            "FmtValue": "2,751,200.00"
          },
          {
            "CellOrdinal": 39,
            "FmtValue": "2,751,200.00"
          }
        ]
      }
    }
;
(function (containerBox){
    var addElement, ans, fs, members, tdChild;
    containerBox = 'div.grid';
  var container = $(containerBox);
  // debugger;
  container.append('<div class="section_result">'+
      '<table id="dataTable">'+
        '<thead id="dataTableHead">'+
          '<script id="axis0_insersion">'+
          '</script>'+
        '</thead>'+
        '<tbody id="dataTableBody">'+
          '<script id="axis1_insersion">'+
          '</script>'+
        '</tbody>'+
      '</table>'+
    '</div>');
  container.find('#axis0_insersion').append('{{axis0}}');
  container.find('#axis1_insersion').append('{{axis1}}');
  // var addElement, ans, fs, members, tdChild;
  var axes = data.Axes,
      axis = axes.Axis,
      axis0 = axis[0], //.Tuples.Tuple
      axis1 = axis[1],
      // axis2 = axis[2].Tuples.Tuple,
      axis0Child = {},
      axis1Child = {};
  /************* Function for graphKey *****************/
  var axis0Names = [];
  for (var index0 in axis0){
     var axis0Member = axis0[index0].Member;
     var axis0Name = '';
     for(var memIndex0 in axis0Member){
       axis0Name = axis0Name+axis0Member[memIndex0].Caption+".";
     }
     axis0Name = axis0Name.substring(0,axis0Name.length-1);
     axis0Names.push(axis0Name);
   }

   /************* Headings for Graph Modal *****************/
   var axis1Names = [];
   for (var index1 in axis1){
      var axis1Member = axis1[index1].Member;
      var axis1Name = '';
      for(var memIndex1 in axis1Member){
        axis1Name = axis1Name+axis1Member[memIndex1].Caption+".";
      }
      axis1Name = axis1Name.substring(0,axis1Name.length-1);
      axis1Names.push(axis1Name);
    }

  /***************** Generating tree structure ****************/
  addElement = function(members, tree, level) {
    var child;
    if (members[0] != null) {
      child = members[0];
      if (!tree[child.UName]) {
        tree[child.UName] = {
          count: 0,
          caption: child.Caption,
          children: {}
        };
      }
      tree[child.UName].count += 1;
      tree[child.UName].level = child.index;
      addElement(members.slice(1), tree[child.UName].children, child.index + 1);
    }
    return tree;
  };

  /***************** Graph Arrays *************/
  var graphKey = [];

  /***************** Axis0 Hierarchical Structure **********/
  axis0Child = axis0.reduce((function(acc, member) {
    return addElement(member.Member, acc, 1);
  }), {});

  /************* Function for rendering axis0 *****************/
  tdAxis0Child = function(element) {
    var a, ele, name,
        frag0 = "<tr>";
    for(var axis1MemberIndex=0, axis1MemberLen = axis1[0].Member.length; axis1MemberIndex < axis1MemberLen; axis1MemberIndex++){
      frag0 += '<th></th>';
    }
    a = (function() {
      var results, elementArray, prevElementArray;
          results = [];
          elementArray = [];
          prevElementArray = [];
          elementArray.push(element);
      while(elementArray.length !== 0){
        results.push(frag0);
        for(var index in elementArray){
          element = elementArray[index];
          prevElementArray[index] = elementArray[index];
          for (name in element) {
            ele = element[name];
            results.push(("<td colspan='" + ele.count + "' class='level" + ele.level + "'>" + ele.caption + "</td>"));
          }
        }
        results.push("</tr>");
        elementArray = [];
        for(index in prevElementArray){
          element = prevElementArray[index];
          for (name in element) {
            ele = element[name];
            if(Object.keys(ele.children).length !== 0){
              elementArray.push(ele.children);
            }
          }
        }
      }
      return results;
    })();
    return (a.reduce((function(acc, line) {
      return acc + line;
    }), ""));
  };
  var template0 = $.trim(container.find("#axis0_insersion").html()),
      frag0 = template0.replace(/{{axis0}}/ig,tdAxis0Child(axis0Child));
  container.find('#dataTableHead').append(frag0);  // #dataTableBody

  /****************************** Data **********************************/
  var cellData = data.CellData,
      cells = cellData.Cell,
      val = [];
  for (var cellIndex in cells) {
    val[cells[cellIndex].CellOrdinal] = cells[cellIndex].FmtValue;
  }
  var count  = 0,
      dataArray = [],
      graphData = [];
  for (var j = 0, len1 = axis1.length; j < len1; j++) {
    td='';
    var tempDataObj = {};
    var graphInnerArray = [];
    for (var i = 0, len = axis0.length; i < len; i++) {
      var graphObj = {};
      if(val[count] !== undefined && val[count] !== null)
      {
        graphObj.key = axis0Names[i];
        graphObj.value = parseFloat(val[count].replace(/,/g,''));
        graphInnerArray.push(graphObj);
      }
      if(val[count] === undefined){
        val[count] = "";
      }
      td += "<td>"+val[count]+"</td>";
      count++;
    }
    graphData.push(graphInnerArray);
    tempDataObj.td = td;
    dataArray.push(tempDataObj);
  }
  graphData.push(axis1Names);

  /****************************** Axis1 Hierarchical Structure **********************************/
  axis1Child = axis1.reduce((function(acc, member) {
    return addElement(member.Member, acc, 1);
  }), {});
  var elementIndex = 0;

  /************* Function for rendering axis1 *****************/
  var rowId = 0;
  tdAxis1Child = function(element) {
    var a, ele, name;
    if (Object.keys(element).length === 0) {
      return "</tr>";
    }
    else {
      a = (function() {
        var results = [];
        for (name in element) {
          ele = element[name];
          if(Object.keys(ele.children).length === 0){
            results.push(("<tr id='row"+rowId+"' class='dataRow'><td rowspan='" + ele.count + "' class='level" + ele.level + "'>" + ele.caption + "</td>")+dataArray[elementIndex].td);
            elementIndex += 1;
            rowId += 1;
          }
          else{
            results.push(("<tr id='row"+rowId+"' class='dataRow'><td rowspan='" + ele.count + "' class='level" + ele.level + "'>" + ele.caption + "</td>") + tdAxis1Child(ele.children));
          }
        }
        return results;
      })();
      return (a.reduce((function(acc, line) {
        return acc + line;
      }), "")).slice(4);
    }
  };
  var template1 = $.trim(container.find("#axis1_insersion").html());
  var frag1 = template1.replace(/{{axis1}}/ig,"<tr id='row0' class='dataRow'>"+tdAxis1Child(axis1Child));
  container.find('#dataTableBody').append(frag1);
  return graphData;
})();
